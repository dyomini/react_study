# 1번 문제. 항공편 검색하기

> 항공편을 검색하는 기능을 구현합니다.
> 단, 지문 및 초기 코드로 제공된 선택자가 다를 경우 정상적으로 채점이 되지 않을 수 있습니다.

## ✅ 1.1 항공편 검색 조건 조작하기

<img src="./images/q1_1.png" width="50%" height="50%">

아래 5가지의 검색 조건을 통해 항공편을 검색할 수 있습니다.

> 항공편 검색 시, 아래의 조건에 대해서는 조작이 불가합니다.
>
> - `왕복` 버튼
> - `직항만 보기` 체크박스
> - `유아`와 `소아`의 인원 수

#### 조건 1. 편도와 왕복

- `편도`가 기본 옵션으로 선택되어 있습니다.

#### 조건 2. 출발지 & 도착지

- 항공편 검색을 위해서는 출발지와 도착지를 `FROM`과 `TO`가 아닌 다른 값(e.g. `HND`)을 선택해야 합니다.
- `SWAP` 버튼을 사용하면 출발지와 도착지를 서로 바꿀 수 있습니다.
  - `SWAP` 버튼은 출발지와 도착지가 각각 `FROM`과 `TO`가 아닌 다른 값이 선택되어있을 때 활성화됩니다.

#### 조건 3. 가는날

- `가는날` 날짜는 현재 접속한 날짜로 설정되어 있습니다.
  - 예를 들어, 10월 30일에 접속했다면 `2023.10.30`으로 설정되어 있어야 합니다.

#### 조건 4. 승객수

- `성인` 승객의 인원 수는 `+`버튼과 `-`버튼을 활용하여 선택할 수 있습니다.

#### 조건 5. 좌석 타입

- 총 4가지의 좌석 타입이 있으며, `전체`가 기본으로 선택되어 있습니다.
  - 좌석 타입: `전체`, `일반석`, `비즈니스석`, `일등석`
- 이때 좌석 타입 버튼 선택 여부는 `./styles/problem_1.css`의 `selected` 선택자를 활용해 주세요.

## ✅ 1.2 항공편 검색하기

<img src="./images/q1_2.png" width="50%" height="50%">

- `항공편 검색하기` 버튼을 클릭하면 검색 조건에 맞는 검색 결과가 위의 예시 이미지처럼 `검색 결과` 영역에 나타납니다.

  - 이때, 기존에 있던 `검색 결과가 없습니다.` 문구는 사라집니다.
  - `항공편 검색하기` 버튼을 클릭 시 아래와 같은 제약 사항이 있습니다.
    - 제약 1. 출발지 및 도착지가 선택되어 있지 않은 경우 `항공편 검색하기` 버튼을 클릭했을 때 `출발지 및 도착지를 선택해 주세요.` 문구의 다이얼로그 창(`window.alert`)이 나타납니다.
    - 제약 2. 선택된 출발지와 도착지가 동일한 경우 `항공편 검색하기` 버튼을 클릭했을 때 `출발지와 도착지를 다르게 선택해 주세요.` 문구의 다이얼로그 창(`window.alert`)이 나타납니다.
    - 제약 3. 검색 조건에 맞는 결과가 없을 경우
      - `조건에 맞는 항공편이 없습니다.` 문구의 다이얼로그 창(`window.alert`)이 나타납니다.
      - `검색 결과` 영역에 `검색 결과가 없습니다.` 문구가 나타납니다.

- 아래의 API 문서를 활용하여 검색 조건에 맞는 항공편 데이터를 가져옵니다.

  > Base URL : https://nwcqlh7byddw5f42qqagt65upm0tynxv.lambda-url.ap-northeast-2.on.aws

  - API 서버 요청 형식은 다음과 같습니다.
    - URL : `/flights?departures=<departures>&arrivals=<arrivals>&date=<date>`
    - Method : `GET`
    - Query Parameter
      - `departures` (출발지)
      - `arrivals` (도착지)
      - `date` (가는날, `YYYY-MM-DD` 형식)
    - 예를 들어, `2023.11.10`일에 `ICN`에서 `HND`로 가는 항공편을 조회하는 API는 `/flights?departures=ICN&arrivals=HND&date=2023-11-10`입니다.
  - API 서버 요청을 통해 다음과 같은 응답 데이터를 받을 수 있습니다.
    - `from` (출발지)
    - `to` (도착지)
    - `depart_date` (출발시간)
    - `arrival_date` (도착시간)
    - `economy` (일반석의 잔여좌석 수)
    - `business` (비즈니스석의 잔여좌석 수)
    - `first` (일등석의 잔여좌석 수)
    - 예를 들어, 응답 데이터 형식은 다음과 같습니다.
      ```json
      {
        "from": "SEL",
        "to": "HND",
        "depart_date": "2023-11-08 17:00",
        "arrival_date": "2023-11-08 19:20",
        "economy": 10,
        "business": 4,
        "first": 3
      }
      ```

- `검색 결과` 영역에 나타나는 항공편 카드는 아래 5가지 요소로 구성되어 있습니다.
  - 출발시간 (`00:00` 형식)
  - 출발지
  - 도착시간 (`00:00` 형식)
  - 도착지
  - 비행시간 (`0시간 0분` 형식, 출발시간과 도착시간을 활용하여 연산을 해주세요.)
- 아래에 주어진 마크업 정보를 활용하여 `검색 결과` 영역에 검색 조건에 맞는 항공편 카드를 나타냅니다.
  ```html
  <ul class="tickets__list">
    <li class="tickets__items" id="item1">
      <div class="items">
        <div class="item">
          <div class="item__time">21:05</div>
          <div class="item__airport">ICN</div>
        </div>
        <div class="item">
          <div class="item__flightTime">2시간 20분</div>
          <div style="width: 90%;">&#8640;</div>
        </div>
        <div class="item">
          <div class="item__time">23:25</div>
          <div class="item__airport">HND</div>
        </div>
      </div>
      <button class="item__button __saved">저장하기</button>
    </li>
  </ul>
  ```

## ✅ 1.3 항공편 검색 결과 정렬하기

- 항공편 검색 결과는 아래의 2가지 방법으로 정렬할 수 있습니다.
  - `잔여 좌석 순` : 잔여 좌석 수를 기준으로 검색 결과가 내림차순으로 정렬됩니다.
  - `출발일 순` : 출발일을 기준으로 검색 결과가 오름차순으로 정렬됩니다.
    - 단, 출발일이 같은 경우 출발 시간이 이른 순으로 정렬됩니다.
- 항공편 검색 결과는 기본으로 `잔여 좌석 순`으로 정렬되어 있습니다.
- 항공편을 재검색하는 경우 정렬 기준은 항상 `잔여 좌석 순`으로 초기화됩니다.

## ✅ 1.4 항공편 검색 결과 저장 및 삭제하기

<img src="./images/q1_4.gif" width="50%" height="50%">

#### 검색 결과 저장하기

- `검색 결과` 영역에 있는 항공편 카드의 `저장하기` 버튼을 통해 `저장소` 영역에 저장할 수 있습니다.
  - `저장하기` 버튼을 클릭하면 `저장소` 영역의 `저장된 항목이 없습니다.` 문구가 사라지고, 선택한 항공편 카드 요소가 `저장소` 영역에 복사됩니다.
  - 저장된 항공편 카드의 경우, `저장하기` 버튼의 텍스트가 `취소하기`로 변경됩니다.
  - 저장되는 항공편은 항상 `저장소` 목록의 제일 상단에 저장됩니다.

#### 저장된 카드 취소하기

- `취소하기` 버튼을 클릭하면 `저장소` 영역에서 항공편 카드를 삭제할 수 있습니다.
- 이때, `정말 삭제하시겠습니까?` 문구의 다이얼로그 창(`window.alert`)이 나타납니다.

#### 저장된 카드 정렬하기

- `저장소` 영역에 저장된 항공편 카드의 경우, 드래그앤드롭 기능을 통해 카드의 정렬을 바꿀 수 있습니다.
  - 예를 들어, `저장소` 영역의 두번째 카드를 드래그하여 첫번째 카드 위에 위치시켜 두 카드의 순서를 바꿀 수 있습니다. 위의 예시 GIF를 참고해 주세요.

## ✅ 1.5 항공편 검색 조건 기억하기

- 새로고침하거나 다시 접속하는 경우, 마지막으로 검색한 검색 조건이 유지될 수 있도록 합니다.
  - 예를 들어, 아래의 조건들로 검색한 후 새로고침을 하였을 때 예시 이미지와 같이 검색했던 조건들이 적용되어 있어야 합니다.
    - 출발지: `ICN`
    - 도착치: `HND`
    - 가는날: `2023.11.07`
    - 성인 승객수: `2`
    - 좌석 타입: `비즈니스석`
- 선택된 모든 검색 조건은 `항공편 검색하기` 버튼을 클릭했을 때 로컬스토리지의 `searchCondition` 이름의 각 검색 조건의 키 값에 배열 형태로 저장됩니다.
  - 각 검색 조건에 따른 키 값은 다음과 같습니다.
    |단위|환율|
    | :--: | :--: |
    | 출발지 | from |
    | 도착치 | to |
    | 가는날 | departDate |
    | 성인 승객수 | numOfAdult |
    | 좌석 타입 | seatedType |
